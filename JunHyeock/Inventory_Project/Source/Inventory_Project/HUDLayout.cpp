// Fill out your copyright notice in the Description page of Project Settings.


#include "HUDLayout.h"

bool UHUDLayout::NativeOnDrop(const FGeometry& InGeometry, const FDragDropEvent& InDragDropEvent, UDragDropOperation* InOperation)
{
	Super::NativeOnDrop(InGeometry, InDragDropEvent, InOperation);
	

	UDragWidget* DragWidgetResult = Cast<UDragWidget>(InOperation);

	if (DragWidgetResult == nullptr)
	return false;

	if (Cast<UUMG_InventoryItem>(DragWidgetResult->WidgetReference))
	return false;

	const FVector2D DragWindowOffset = InGeometry.AbsoluteToLocal(InDragDropEvent.GetScreenSpacePosition());
	const FVector2D DragWindowOffsetResult = DragWindowOffset - DragWidgetResult->DragOffset;

	DragWidgetResult->WidgetReference->AddToViewport();
	DragWidgetResult->WidgetReference->SetVisibility(ESlateVisibility::Visible);
	DragWidgetResult->WidgetReference->SetPositionInViewport(DragWindowOffsetResult, false);


	return true;



}
